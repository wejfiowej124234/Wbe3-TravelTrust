# TravelTrust 文档索引

文档按**企业级阅读与开发顺序**排列：先总览与架构，再业务规则与实现，最后开发流程与合规门禁。建议按序号阅读。**受众与用法**：全体；入口文档，建议先阅再按 01～08 顺序阅读。**文档维护责任**：文档或项目负责人；索引与版本表变更须与 01～08 标题/结构一致。

---

## 文档列表与阅读顺序

| 顺序 | 文档 | 内容 |
|------|------|------|
| 00 | [00-文档索引](00-文档索引.md) | 本索引（入口） |
| 01 | [01-总库总览](01-总库总览.md) | **总库总览**：**去中心化协议**定位、业务流程、混合形态、链选型（EVM+L2）、智能合约与 DB、钱包策略、仓库骨架、弊端与应对。 |
| 02 | [02-架构设计](02-架构设计.md) | **架构设计**：分层、子域切分、状态机、钱与链抽象、安全与合规、事件/对账/执行器、与 01 可追溯、合约与模块对应；**功能与参考实例对照**（Escrow/Staking/Registry/争议/索引/预订）；**架构级检查清单**（安全·流程·审计）。 |
| 03 | [03-业务流程与风控](03-业务流程与风控.md) | **业务流程与风控**：流程缺口与规则补全、公平评分与防恶意、争议人工裁决（合约执行）；与 01 状态机/超时/争议窗口/Sybil P0 可追溯。 |
| 04 | [04-后端与API](04-后端与API.md) | **后端与 API**：数据表与 core 类型、API 路由 v1、风控、落地顺序；与 01/02 用户与账号、权限、对账/执行器可追溯。 |
| 05 | [05-前端总览](05-前端总览.md) | **前端总览**：**前端框架锁定 Yew**（Rust→WASM）；**前端文档用法**（05 为主、06 配合 DApp）；页面与组件、api/dapp 分工、代币支付落点；**Web 与 DApp 业务数据同源**；**§九 UI/UX**（设计语言、四层结构、9.0.5 顶级要求）；与 01～07 可追溯，含企业级审计标注。 |
| 06 | [06-DApp架构总览](06-DApp架构总览.md) | **DApp 架构总览（Yew 前端·DApp 模式）**：与 05 同一前端、dapp/ 模块的架构专篇；**DApp 文档用法**（05 为主、06 为辅）；开篇**与 01/02 对应**、**关键一致性核对**表与**总览主题符合性**表；§一～§五 定位/架构/数据流/总库关系、§六 企业级审计标注；风格与 05 对齐。 |
| 07 | [07-开发流程与顺序](07-开发流程与顺序.md) | **开发流程与顺序**：先确认的架构、Phase 0～5 阶段与顺序；P0/12 缝/17 条以 01 为准、02 可追溯；**§四 企业级审计标注**（4.1 与 01～06 一致性核对、4.2 审计报告与多维度结论、4.3 开工前/发版前检查清单）。与 01～06 对齐，含 04 §五 与 07 Phase 对应。 |
| 08 | [08-战略与合规风险检查清单](08-1-战略与合规风险检查清单.md) | **战略与合规风险检查清单**（08 主文档）：A～Q 检查项、上线就炸 11 项、Gate-1～5；发版前作为 P0 门禁，见 07 §4.3。闭合工单与定稿载体见下「08 系列」。 |

---

## 08 系列（合规与门禁）— 分层与内容

**阅读与使用顺序**（建议按序号 08-0 → 08-1 → 08-2 → 08-3 → 08-4 → 08-5 → Runbook → evidence 推进）：

| 序号 | 层级 | 文档/路径 | 内容 |
|------|------|-----------|------|
| **08-0** | 系列审计 | [08-0-系列审计-命名排序与合并瘦身](08-0-系列审计-命名排序与合并瘦身.md) | 08 系列命名排序、可合并项、可瘦身项及建议执行顺序；**企业级自检表**（§八）、**技术缺口与已修复**（§十）、**企业级技术文档审计报告**（§十一）、**深度企业级技术审计**（§十二）、**docs 企业级符合性检查**（§十三）、**世界级文档审计问题清单**（§十四）见该文档 |
| **08-1** | 主文档 | [08-1-战略与合规风险检查清单](08-1-战略与合规风险检查清单.md) | 检查项、首发前必须闭合、闭合四列+Gate、定稿载体模板、上线就炸 11 项、优先闭合 6 项、A～Q 各节、附录 GO/NO-GO Gate |
| **08-2** | 附录 | [08-2-附录-闭合工单表](08-2-附录-闭合工单表.md) | 闭合工单 workitem 表（优先 6 项+上线就炸 11 项+深层机制 #12～#22）、Gate 汇总、一致性与冲突检测、演化五类、**发版前审查一**（语义一致性）、**发版前审查二**（Gate 冲突矩阵） |
| **08-3** | 定稿载体 | [08-3-参数与门禁表](08-3-参数与门禁表.md) | 参数与门禁表（SSOT）；26 key 入表，权限层级、关键 key 与 08-4 映射、变更记录 |
| **08-4** | 定稿载体 | [08-4-对外口径包](08-4-对外口径包.md) | 对外口径包（PDP）；固定 8 章 + 协议终极边界声明与终局设计 |
| **08-5** | CI 落地 | [08-5-CI与一致性落地说明](08-5-CI与一致性落地说明.md) | PR 模板、08-3/08-4 一致性校验脚本及 CI 接入说明（原 08-CI，已统一数字序号） |
| **—** | 定稿载体 | [ops/RUNBOOK](../ops/RUNBOOK.md) | Runbook §1～§11、定稿表 P0（9 项）、演练模板、值班/批准链 |
| **—** | 证据目录 | evidence/GO_YYYYMMDD/ | 每 Gate 通过的 evidence bundle（manifest.json + manifest.sha256）；模板见 evidence/GO_YYYYMMDD_template/。**路径以仓库根为准**（非 docs/ 下）。 |

**用法**：先过 08-1 主文档检查项与 Gate；工单推进用 08-2-附录-闭合工单表；结论落 08-3-参数与门禁表/08-4-对外口径包/Runbook；CI 与一致性见 08-5；每过一门产出 evidence/GO_YYYYMMDD/。08 系列审计闭合标准与 P0 要求见 08-4/08-3 开篇「审计闭合标准」及 08-2 W-PDP-SSOT-CONSISTENCY、W-DRIFT-CI。

**08 定稿与闭合顺序（建议）**：① 定稿 08-4（示例已替换或确认、二选一/三选一写死 + 版本号+定稿日期+签字）② 补齐 08-3 每 key 四列（value、evidence_pointer、who_can_change、change_process/audit）③ CI 门禁机读化（PR 模板、08-4 版本号校验、key 变更→08-4 同步阻断）④ 08-2 工单 Owner 落具体责任人（姓名或代号）⑤ 各 Gate 产出 evidence/GO_YYYYMMDD/（首次过门见 evidence/README）。

**发版前快速核对**（逐项勾选）：① □ 08-4 定稿检查勾选（含企业级/穿透、去中心化自检七项）；**08-4 版本号、定稿日期、法务/运营签字缺一不可**，否则不得作为门禁闭合证据 ② □ Runbook 定稿表 P0 最小必填项（9 项）③ □ 08-2 定稿前/发版前检查（含 12 项+14 项+协议终极边界与终局设计+自检七项）④ □ 08-2 [发版前审查一（语义一致性）](08-2-附录-闭合工单表.md#发版前审查一关键语义一致性审查表) 已过 ⑤ □ 08-2 [发版前审查二（Gate 冲突矩阵）](08-2-附录-闭合工单表.md#发版前审查二gate-冲突矩阵与优先级规则) 或 W-GATE-CROSS-CHECK 证据已留档 ⑥ □ 08-3 26 key 全列填满 ⑦ □ evidence/GO_YYYYMMDD/ 已产出且工单 Evidence 列已填路径或 hash。

**发版前必做清单**（人工执行，缺一不可）：□ **00 版本表**：15 篇版本号与最后更新日期填实 □ **08-4 定稿三要素**：文末文档版本（CI 校验用）、定稿日期、法务/运营签字或邮件确认 □ **08-2 工单 Owner 落人**：各 workitem Owner 列由角色改为「角色（姓名或代号）」并指定 backup □ **08-2 发版前审查一/二**：审查一 11 行逐行勾选并填审查人/日期/结论；审查二填最后更新/评审日期/Evidence 路径 □ **evidence**：每 Gate 产出 evidence/GO_YYYYMMDD/（manifest.json + manifest.sha256），08-2 Evidence 列填路径或 hash。

**企业级审计/阅读导航（降低单点理解成本）**：08-1 + 08-2 + 08-3 + 08-4 + 08-5 + Runbook + evidence 文档体系较长；**过复杂本身也是风险**（审计会问「是否存在单点理解成本过高」）。建议：① **首次审计**：00 本表 → 08-1 主清单与 Gate 汇总 → 08-4 对外口径包（危机可直接引用）→ Runbook §1 触发表 + §6/§7/§11；② **定稿/闭合**：**以 08-2 工单表与 Gate 为主入口**，08-1 为详细检查清单；08-2 工单表 + 08-3 26 key + 08-4 定稿检查勾选；③ **一致性与 CI**：08-5、08-2 W-PDP-SSOT-CONSISTENCY、W-GATE-CROSS-CHECK。一页图或「08 阅读路径」可另行维护于 08-1 或本索引，便于审计快速定位。

---

## 归类说明

- **章节编号约定**：01 用 **§1～§10**（阿拉伯数字）；02～06 用 **§一～§十三**（汉字）；07/08 混用阿拉伯数字（如 §2、§4.3）与 §N。跨文档引用时按各文档实际标题为准。
- **总览**：01 项目全貌、链与数据形态；02 架构原则与分层。
- **业务规则**：03 流程、评分、争议（先于实现确认）。
- **实现**：04 后端与 API；05 前端；06 DApp。
- **流程**：07 企业级开发顺序与阶段。
- **合规与风险**：08 主清单（首发/发版前勾选）；08-2 附录 闭合工单表；定稿载体 SSOT/PDP/Runbook；evidence/。

---

## 文档版本与最后更新

各文档文末「文档版本与最后更新见 00」即指下表。维护时更新此处即可，无需在各文档内重复写版本号。**定稿或发版时请填写版本号与日期**；**08-4 版本号须与文末「文档版本（CI 校验用）」一致**，与 CI 联动（key 变更→版本号须更新）见 [08-2](08-2-附录-闭合工单表.md) W-PDP-SSOT-CONSISTENCY。下表占位版本（0.1.0-draft）表示待定稿，定稿/发版时须替换为正式版本与日期；发版前须填实版本号与最后更新日期。

| 文档 | 版本 | 最后更新 |
|------|------|----------|
| 00-文档索引 | 0.1.0-draft | 2025-02-20 |
| 01-总库总览 | 0.1.0-draft | 2025-02-20 |
| 02-架构设计 | 0.1.0-draft | 2025-02-20 |
| 03-业务流程与风控 | 0.1.0-draft | 2025-02-20 |
| 04-后端与API | 0.1.0-draft | 2025-02-20 |
| 05-前端总览 | 0.1.0-draft | 2025-02-20 |
| 06-DApp架构总览 | 0.1.0-draft | 2025-02-20 |
| 07-开发流程与顺序 | 0.1.0-draft | 2025-02-20 |
| 08-0-系列审计-命名排序与合并瘦身 | 0.1.0-draft | 2025-02-20 |
| 08-1-战略与合规风险检查清单 | 0.1.0-draft | 2025-02-20 |
| 08-2-附录-闭合工单表 | 0.1.0-draft | 2025-02-20 |
| 08-3-参数与门禁表 | 0.1.0-draft | 2025-02-20 |
| 08-4-对外口径包 | 0.1.0-draft | 2025-02-20 |
| 08-5-CI与一致性落地说明 | 0.1.0-draft | 2025-02-20 |
| 多维度文档与技术检查报告 | 0.1.0-draft | 2025-02-20 |

**说明**：上表为占位版本（0.1.0-draft）与日期，定稿/发版时须替换为正式版本号与最后更新日期。**发版前必做**：版本号与最后更新日期须全部填实，否则不得作为门禁闭合证据；08-4 版本号须与文末「文档版本（CI 校验用）」一致。

**定稿时操作**：将上表「版本」列由 `0.1.0-draft` 改为正式版本号（如 `1.0.0`），「最后更新」列改为实际日期；08-4 行版本号须与 [08-4 文末](08-4-对外口径包.md)「文档版本（CI 校验用）」行一致。

---

## 当前 docs 目录结构（按序号排序）

```
docs/
├── 00-文档索引.md           # 本索引（建议先看）
├── 01-总库总览.md           # 总库总览
├── 02-架构设计.md           # 架构设计
├── 03-业务流程与风控.md     # 业务流程、评分公平、争议人工裁决
├── 04-后端与API.md          # 后端与 API
├── 05-前端总览.md           # 前端总览
├── 06-DApp架构总览.md       # DApp 架构设计总览
├── 07-开发流程与顺序.md     # 企业级开发流程与顺序
├── 08-0-系列审计-命名排序与合并瘦身.md  # 08 系列审计：命名/排序/合并/瘦身建议
├── 08-1-战略与合规风险检查清单.md       # 08 主文档
├── 08-2-附录-闭合工单表.md              # 08 附录：闭合工单、Gate 汇总、P0 必填项；发版前审查一（语义一致性）+ 发版前审查二（Gate 冲突矩阵）已并入
├── 08-3-参数与门禁表.md                 # 08 定稿载体：参数与门禁表（SSOT）
├── 08-4-对外口径包.md                   # 08 定稿载体：对外口径包（PDP）
├── 08-5-CI与一致性落地说明.md          # 08-5 CI 与一致性：PR 模板、校验脚本、接入说明
└── 多维度文档与技术检查报告.md         # 文档与技术缺口检查（发版前/定稿前逐项闭合）

ops/
└── RUNBOOK.md               # 定稿载体：Runbook + 演练模板

evidence/
├── README.md                # Gate 证据目录说明、首次过门步骤
├── GO_placeholder/          # 占位说明（非真实 bundle）
├── GO_YYYYMMDD_template/    # 可复制模板（首次过门复制为 GO_YYYYMMDD）
└── DR-YYYYQX-0N/            # 演练产物（可选，按演练编号建子目录）

scripts/
├── check-08-consistency.sh      # 08-3/08-4 一致性校验（CI 可调用）
├── check-ssot-deploy.sh        # 部署前 SSOT 校验（STRICT_SSOT/CHECK_SSOT=1 时要求 SSOT_VERSION）
├── validate-evidence-manifest.sh # evidence manifest.json 校验（可选，依赖 jq）
├── build-frontend-manifest.sh  # 前端可验证发布：构建产物 manifest.json + manifest.sha256
└── checklist-17.md             # 01 §10 17 条验收清单（逐条勾选用）

.github/
├── PULL_REQUEST_TEMPLATE.md # 08 门禁必填项
└── workflows/               # 可选：check-08-consistency 等
```

**多维度检查**：发版前/定稿前可参考 [多维度文档与技术检查报告](多维度文档与技术检查报告.md) 逐项闭合文档缺口与技术问题（前端、后端、区块链与智能合约、08 门禁）。

*本文与 [01-总库总览](01-总库总览.md)、[02-架构设计](02-架构设计.md)、[03-业务流程与风控](03-业务流程与风控.md)、[04-后端与API](04-后端与API.md)、[05-前端总览](05-前端总览.md)、[06-DApp架构总览](06-DApp架构总览.md)、[07-开发流程与顺序](07-开发流程与顺序.md)、[08-战略与合规风险检查清单](08-1-战略与合规风险检查清单.md) 配套；**08 系列 08-0～08-5 见上表**；文档版本与最后更新见上表。*
